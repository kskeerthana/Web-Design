<!DOCTYPE html>
<html>
    <head>
        <title>Form Validation</title>

        <style>
            #container{
                background-color: #FAF3DD;
                width: 700px;
                margin: auto;
            }
            main{
                padding: 50px;
            }
            label{
                width: 150px;
                float: left;
            }
            #displayTable{
                border:2px solid black;
                border-collapse: collapse;
	            margin: 30px 30px 20px 40px;
            }
            #displayTable input{
                margin-left: 2px;
            }
            #displayTable td, th {
	            border:1px solid black;
	            padding: 5px;
            }
            #displayTable th {
	            color: #fff;
	            background-color:gray;
            }
        </style>
    </head>

    <body>
        <div id="container">
        <main>
            <h2>Feedback</h2>
            <h3>Open to criticisms!</h3>
            <p>Note : Fields marked with (*) are mandatory</p>
            <p>Look out for your details below after submission!</p>
            

            <form method="post" id="form-container" action="#">
                <label>Title*:</label>
                <input type="radio" name="title" id="miss" value="Miss" required="required"/> Miss
                <input type="radio" name="title" id="mrs" value="Mrs" required="required"/> Mrs
                <input type="radio" name="title" id="mr" value="Mr" required="required" /> Mr
               
                <br><br>


                <label for="firstName">Firstname*:</label>
                <input type="text" id="firstName" name="firstName" value="" placeholder="First Name" required="required"/>
                <br><br>

                <div id="error_firstName" style="display: none; color: red;">
                    Invalid first name, Please enter a valid first Name
                    <br><br>
                </div>

                <label for="lastname">Lastname*:</label>
                <input type="text" id="lastname" name="lastname" value="" placeholder="Last Name" required="required"/>
                <br><br>

                <div id="error_lastname" style="display: none; color: red;">
                    Invalid last name, Please enter a valid last name
                    <br><br>
                </div>

                <label for="emailId">Email Id*:</label>
                <input type="text" id="emailId" name="emailId" value="" placeholder="yourname@northeastern.edu" required="required"/>
                <br><br>

                <div id="error_emailId" style="display: none; color: red;">
                    Invalid email id, Please enter a valid email Id
                    <br><br>
                </div>

                <label for="phoneNumber">Phone Number*:</label>
                <input type="text" id="phoneNumber" name="phoneNumber" value="" placeholder="xxx-xxx-xxxx" required="required"/>
                <br><br>

                <div id="error_phoneNumber" style="display: none; color: red;">
                    Invalid phone number, Please enter a valid phone number
                    <br><br>
                </div>

                <label for="streetAddress1">Street Address 1*:</label>
                <input type="text" name="streetAddress1" id="streetAddress1" value="" placeholder="address" required="required"/>
                <br><br>

                <label for="streetAddress2">Street Address 2:</label>
                <input type="text" name="streetAddress2" id="streetAddress2" value="" placeholder="address" />
                <br><br>

                <label for="city">City*:</label>
                <input type="text" name="city" id="city" placeholder="city" value="" required="required" />
                <br><br>

                <label for="state">State*:</label>
                <input type="text" name="state" id="state" placeholder="state" />
                <br><br>

                <label for="zipCode">Zip Code*:</label>
                <input type="number" id="zipCode" name="zipCode" placeholder="xxxxxx" required="required">
                <br><br>

                <div id="error_zipCode" style="display: none; color: red;">
                    Invalid zip code, Please enter a valid zip code
                    <br><br>
                </div>

                <label for="contactInfo">How did you hear about us?*:  </label>
                <input type="checkbox" name="referral" value="Facebook">Facebook
                <input type="checkbox" name="referral" value="Google">Google
                <input type="checkbox" name="referral" value="Yelp">Yelp
                <br><br><br>

                <label for="drinks">Drinks*:</label>
                <select id="drinks" name="drinks" onchange="getDrinkSize(this)" required="required">  
                    <option value="drinkChoice">--Select your choice of Drink--</option>
                    <option value="blacktea">Black Tea</option>
                    <option value="cold coffee">Cold Coffee</option>
                    <option value="expresso">Expresso</option>
                    <option value="Latte">Latte</option>
                    <option value="Bournvita">Bournvita</option>
                </select>

                <p id="selectOption"></p>
                <div id="drink_size" style="display: none;">
                    <input type="checkbox" name="size" value="regular" onclick="getAdditionalDataColumn(this)">Regular
                    <input type="checkbox" name="size" value="medium" onclick="getAdditionalDataColumn(this)">Medium
                    <input type="checkbox" name="size" value="large" onclick="getAdditionalDataColumn(this)">Large
                </div>
                <br>

                <div id="additional_data" style="display: none;">
                    <label for="additional_data">Any additional customisations* :</label>
                    <textarea id="additional_data_val" rows="4" columns="55"></textarea>
                </div>
                <br>

                <label for="comments">Comments* :</label>
                <textarea id="comments" rows="4" columns="55"></textarea> 
                <br><br>

                <input type="Submit" value="Submit">
                <input type="Reset">
                <br><br>
            </form>
        </main>
    </div>
        <table id="displayTable" style="display: none;">
            <tbody>
                <tr>
                    <th>Title</th>
                    <th>Firstname</th>
                    <th>Lastname</th>
                    <th>Email Id</th>
                    <th>Phone Number</th>
                    <th>Street Address 1</th>
                    <th>Street Address 2</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Zip Code</th>
                    <th>Referral</th>
                    <th>Drink Size</th>
                    <th>Additional Customisations</th>
                    <th>Comments</th>
                </tr>
            </tbody>
        </table>
        <script>
            var rowCount = 1;
            var form = document.getElementById("form-container");
            form.addEventListener("submit", displayDetails);

            var validFirstName = false;
            var validLastName = false;
            var validEmail = false;
            var validPhone = false;
            var validZipCode = false;

            // regular expressions for name, email and phone
            var regExFirstName = /^[a-zA-Z]+$/;
            var regExLastName = /^[a-zA-Z]+$/;
            var regExEmail = /([\w\.]+)@northeastern.edu+$/;
            var regExPhone = /\d{3}-?\d{3}-\d{4}$/;
            var regExZip = /^[0-9]+$/;

            //values
            var firstName = document.getElementById("firstName");
            firstName.addEventListener("input", validate)

            var lastName = document.getElementById("lastname");
            lastName.addEventListener("input", validate)

            var email = document.getElementById("emailId");
            email.addEventListener("input", validate)

            var phone = document.getElementById("phoneNumber");
            phone.addEventListener("input", validate)

            var zip = document.getElementById("zipCode");
            zip.addEventListener("input", validate)

            function validate(e){
                var value = e.target.value;
                var type=this.id;
                var em = 'error_' + type;

                switch(type){
                    case "firstName":
                        if(!value.trim().match(regExFirstName)){
                            document.getElementById(em).style.display = "block";
                            this.style.border = "2px solid red";
                            validFirstName = false;
                        }
                        else{
                            document.getElementById(em).style.display = "none";
                            x=document.getElementById(em)
                            this.style.border = "";
                            validFirstName = true;
                        }
                        break;
                    case "lastname":
                        if(!value.trim().match(regExLastName)){
                            document.getElementById(em).style.display = "block";
                            this.style.border = "2px solid red";
                            validLastName = false;
                        }
                        else{
                            document.getElementById(em).style.display = "none";
                            this.style.border = "";
                            validLastName = true;
                        }
                        break;    
                    case "emailId":
                        if(!value.trim().match(regExEmail)){
                            document.getElementById(em).style.display = "block";
                            this.style.border = "2px solid red";
                            validEmail = false;
                        }
                        else{
                            document.getElementById(em).style.display = "none";
                            this.style.border = "";
                            validEmail = true;
                        }
                        break;
                    case "phoneNumber":
                        if(!value.trim().match(regExPhone)){
                            document.getElementById(em).style.display = "block";
                            this.style.border = "2px solid red";
                            validPhone = false;
                        }
                        else{
                            document.getElementById(em).style.display = "none";
                            this.style.border = "";
                            validPhone = true;
                        }
                        break;
                    case "zipCode":
                        if(!value.trim().match(regExZip)){
                            document.getElementById(em).style.display = "block";
                            this.style.border = "2px solid red";
                            validZipCode = false;
                        }
                        else{
                            document.getElementById(em).style.display = "none";
                            this.style.border = "";
                            validZipCode = true;
                        }
                        break;    
                }
            }
            function getDrinkSize(select){
                var selectedSize = select.options[select.selectedIndex].value;
                if(!(selectedSize == 'drinkChoice')){
                    document.getElementById("drink_size").style.display = "revert";
                }else{
                    document.getElementById("drink_size").style.display = "none";
                }
            }

            function getAdditionalDataColumn(checkbox){
                if(checkbox.checked == true){
                    document.getElementById("additional_data").style.display = "revert";
                }
                else{
                    document.getElementById("additional_data").style.display = "none";
                }
            }

            function displayRadioValue(){
                var title = document.getElementsByName("title");
                for(i = 0; i < title.length; i++) {
                    if(title[i].checked){
                        return (title[i].value);
                    }
            }
            }

            function displayReferralValue(){
                var referral_val = document.getElementsByName("referral");
                for(i = 0; i < referral_val.length; i++) {
                    if(referral_val[i].checked){
                        console.log("printng referral val",referral_val)
                        return (referral_val[i].value);
                    }
            }
            }

            function displayDrinkSize(){
                var drink_size_val = document.getElementsByName("size");
                for(i = 0; i < drink_size_val.length; i++) {
                    if(drink_size_val[i].checked){
                        console.log("printng referral val",drink_size_val)
                        return (drink_size_val[i].value);
                    }
                }
            }


            function displayDetails(e){
                e.preventDefault();
                var title_val = displayRadioValue();
                var referral = displayReferralValue();
                var tbodyRef = document.getElementsByTagName("tbody")[0];   
                var title = title_val;
                var firstName = document.getElementById("firstName").value;
                var lastName = document.getElementById("lastname").value;
                var emailId = document.getElementById("emailId").value;
                var phoneNumber = document.getElementById("phoneNumber").value;
                var address1 = document.getElementById("streetAddress1").value;
                var address2 = document.getElementById("streetAddress2").value;
                var city = document.getElementById("city").value;
                var state = document.getElementById("state").value;
                var zipCode_val = document.getElementById("zipCode").value;
                var referral_Val = referral;
                // var drinks = getDrinkSize();
                var drinkSize = displayDrinkSize();
                var additional_custom = document.getElementById("additional_data_val").value;
                var comments = document.getElementById("comments").value;
                
                if(!(firstName&&lastName&&emailId&&address1&&city&&state&&zipCode)){
                    // &&referral&&drinks&&drinkSize&&additional_custom&&comments
                    alert("Please enter valid details")
                }else{
                    var displayTable = document.getElementById("displayTable");
                    console.log("Got display table");
                    displayTable.style.display = 'revert';
                    
                    var newRow = document.createElement("tr");

                    var titleCell = document.createElement("td");
                    titleCell.innerHTML = title;
                    var fnameCell = document.createElement("td");
                    fnameCell.innerHTML = firstName;
                    var lnameCell = document.createElement("td");
                    lnameCell.innerHTML =lastName;
                    var emailCell = document.createElement("td");
                    emailCell.innerHTML = emailId;
                    var phoneNumberCell = document.createElement("td");
                    phoneNumberCell.innerHTML = phoneNumber;
                    var address1Cell = document.createElement("td");
                    address1Cell.innerHTML = address1;
                    var address2Cell = document.createElement("td");
                    address2Cell.innerHTML = address2;
                    var cityCell = document.createElement("td");
                    cityCell.innerHTML = city;
                    var stateCell = document.createElement("td");
                    stateCell.innerHTML = state;
                    var zipCodeCell = document.createElement("td");
                    zipCodeCell.innerHTML = zipCode_val;
                    var referralCell = document.createElement("td");
                    referralCell.innerHTML = referral_Val;
                    // var drinksCell = document.createElement("td");
                    // drinksCell.innerHTML = drinks;
                    var drink_sizeCell = document.createElement("td");
                    drink_sizeCell.innerHTML =  drinkSize;
                    var additionalCell = document.createElement("td");
                    additionalCell.innerHTML = additional_custom;
                    var commentsCell = document.createElement("td");
                    commentsCell.innerHTML = comments;

                    newRow.appendChild(titleCell);
                    newRow.appendChild(fnameCell);
                    newRow.appendChild(lnameCell);
                    newRow.appendChild(emailCell);
                    newRow.appendChild(phoneNumberCell);
                    newRow.appendChild(address1Cell);
                    newRow.appendChild(address2Cell);
                    newRow.appendChild(cityCell);
                    newRow.appendChild(stateCell);
                    newRow.appendChild(zipCodeCell);
                    newRow.appendChild(referralCell);
                    // newRow.appendChild(drinksCell);
                    newRow.appendChild(drink_sizeCell);
                    newRow.appendChild(additionalCell);
                    newRow.appendChild(commentsCell);
                    
                    tbodyRef.appendChild(newRow);
                }
                
            }

        </script>
    </body>
</html>